{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport Layout from \"../components/Layout\";\nimport { useRouter } from \"next/router\";\nimport { houses } from \"../Bienes\";\n\nconst Form = () => {\n  const router = useRouter();\n  const date = new Date();\n  const el = houses.find(el => el.id === router.query.id);\n  let selected;\n  let radioSelected;\n  let hour = 9;\n  const radioValues = [\"Video Chat\", \"Presencial\"];\n\n  const regisAppointment = async e => {\n    // e.preventDefault();\n    const res = await fetch(\"/api/register\", {\n      body: JSON.stringify({\n        id: el.id,\n        date: selected,\n        type: radioSelected,\n        hour: hour\n      }),\n      headers: {\n        ContentType: \"application/json\"\n      },\n      method: \"POST\"\n    });\n    const result = await res.json();\n  };\n\n  const groupDays = (date, numberOfDays) => {\n    let days = [];\n\n    const useDate = date => {\n      const str = date.toUTCString();\n      const weekDay = str.split(\",\")[0],\n            day = str.split(\" \")[1],\n            mounth = str.split(\" \")[2],\n            year = str.split(\" \")[3],\n            id = new Date(day + mounth + year).valueOf();\n      return {\n        weekDay,\n        day,\n        mounth,\n        year,\n        id\n      };\n    };\n\n    for (let day = 0; day < numberOfDays; day++) {\n      days.push(useDate(new Date(date.valueOf() + day * 86.4 * 10 ** 6)));\n    }\n\n    return days;\n  };\n\n  const calendarClick = e => {\n    let el = e.target;\n\n    const apparence = () => {\n      let obj = document.getElementById(`${selected}`);\n      let props = [\"bg-light\", \"bg-primary\", \"text-light\"];\n      props.forEach(prop => {\n        obj.firstChild.classList.toggle(prop);\n      });\n    };\n\n    selected && apparence();\n\n    while (true) {\n      if (el.id) {\n        break;\n      }\n\n      el = el.parentNode;\n    }\n\n    selected = el.id;\n    apparence();\n  };\n\n  const changeRadio = e => {\n    if (radioSelected) {\n      radioValues.forEach(value => {\n        document.querySelector(`[value='${value}']`).parentNode.classList.toggle(\"active\");\n      });\n    } else {\n      e.target.parentNode.classList.toggle(\"active\");\n    }\n\n    radioSelected = e.target.value;\n  };\n\n  return /*#__PURE__*/_jsx(Layout, {\n    footer: false,\n    children: /*#__PURE__*/_jsx(\"div\", {\n      className: \"container p-2\",\n      children: /*#__PURE__*/_jsxs(\"form\", {\n        onSubmit: regisAppointment,\n        children: [/*#__PURE__*/_jsx(\"h4\", {\n          className: \"p-3\",\n          children: /*#__PURE__*/_jsx(\"strong\", {\n            children: \"Select a Tour Style\"\n          })\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: \"btn-group-toggle row\",\n          children: radioValues.map((el, i) => /*#__PURE__*/_jsxs(\"label\", {\n            className: \"form-label btn btn-outline-primary col\",\n            children: [/*#__PURE__*/_jsx(\"input\", {\n              className: \"form-check-input\",\n              onChange: changeRadio,\n              type: \"radio\",\n              name: \"options\",\n              id: `option${i}`,\n              value: el,\n              required: true\n            }), el]\n          }, i))\n        }), /*#__PURE__*/_jsx(\"h4\", {\n          className: \"py-2\",\n          children: /*#__PURE__*/_jsx(\"strong\", {\n            children: \"Select a Date\"\n          })\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: \"row row-cols-md-4 row-cols-lg-5\",\n          children: groupDays(date, 10).map(({\n            day,\n            mounth,\n            weekDay,\n            year,\n            id\n          }, i) => /*#__PURE__*/_jsx(\"div\", {\n            id: id,\n            className: \"btn-group-toggle text-center col my-2\",\n            children: /*#__PURE__*/_jsxs(\"label\", {\n              onClick: calendarClick,\n              className: \"form-label btn card bg-light user-select-none\",\n              children: [/*#__PURE__*/_jsx(\"input\", {\n                className: \"form-check=input\",\n                type: \"radio\",\n                name: \"days\",\n                required: true\n              }), /*#__PURE__*/_jsxs(\"div\", {\n                children: [/*#__PURE__*/_jsxs(\"div\", {\n                  className: \"card-header h5\",\n                  children: [mounth, \" \", day]\n                }), /*#__PURE__*/_jsx(\"div\", {\n                  className: \"card-body h3\",\n                  children: weekDay\n                }), /*#__PURE__*/_jsx(\"div\", {\n                  className: \"card-footer h5\",\n                  children: year\n                })]\n              })]\n            })\n          }, i))\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: \"form-group row\",\n          children: /*#__PURE__*/_jsx(\"label\", {\n            className: \"col-12 col-lg-4\",\n            children: /*#__PURE__*/_jsx(\"select\", {\n              onChange: e => hour = e.target.value,\n              className: \"form-control text-center\",\n              name: \"Hour\",\n              id: \"hour\",\n              children: [9, 10, 11, 1, 2, 3, 4, 5].map((hour, i) => /*#__PURE__*/_jsx(\"option\", {\n                value: hour,\n                children: `${hour}:00 ${hour > 5 ? \"am\" : \"pm\"}`\n              }, i))\n            })\n          })\n        }), /*#__PURE__*/_jsx(\"button\", {\n          type: \"submit\",\n          className: \"btn btn-primary my-2 col-md-12\",\n          children: \"Request this time\"\n        })]\n      })\n    })\n  });\n};\n\nexport default Form;","map":null,"metadata":{},"sourceType":"module"}