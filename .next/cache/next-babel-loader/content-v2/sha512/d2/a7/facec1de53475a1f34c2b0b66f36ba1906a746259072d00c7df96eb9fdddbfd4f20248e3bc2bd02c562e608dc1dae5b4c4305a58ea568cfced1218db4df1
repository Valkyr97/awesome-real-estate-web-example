{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _regeneratorRuntime from \"C:/Users/Janyel/Desktop/proyect/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"C:/Users/Janyel/Desktop/proyect/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport Layout from \"../components/Layout\";\nimport { useRouter } from \"next/router\";\nimport { houses } from \"../Bienes\";\n\nvar Form = function Form() {\n  var router = useRouter();\n  var date = new Date();\n  var el = houses.find(function (el) {\n    return el.id === router.query.id;\n  });\n  var selected;\n  var radioSelected;\n  var hour = 9;\n  var radioValues = [\"Video Chat\", \"Presencial\"];\n\n  var regisAppointment = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(e) {\n      var res, result;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return fetch(\"/api/register\", {\n                body: JSON.stringify({\n                  id: el.id,\n                  date: selected,\n                  type: radioSelected,\n                  hour: hour\n                }),\n                headers: {\n                  ContentType: \"application/json\"\n                },\n                method: \"POST\"\n              });\n\n            case 2:\n              res = _context.sent;\n              _context.next = 5;\n              return res.json();\n\n            case 5:\n              result = _context.sent;\n\n            case 6:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function regisAppointment(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var groupDays = function groupDays(date, numberOfDays) {\n    var days = [];\n\n    var useDate = function useDate(date) {\n      var str = date.toUTCString();\n      var weekDay = str.split(\",\")[0],\n          day = str.split(\" \")[1],\n          mounth = str.split(\" \")[2],\n          year = str.split(\" \")[3],\n          id = new Date(day + mounth + year).valueOf();\n      return {\n        weekDay: weekDay,\n        day: day,\n        mounth: mounth,\n        year: year,\n        id: id\n      };\n    };\n\n    for (var day = 0; day < numberOfDays; day++) {\n      days.push(useDate(new Date(date.valueOf() + day * 86.4 * Math.pow(10, 6))));\n    }\n\n    return days;\n  };\n\n  var calendarClick = function calendarClick(e) {\n    var el = e.target;\n\n    var apparence = function apparence() {\n      var obj = document.getElementById(\"\".concat(selected));\n      var props = [\"bg-light\", \"bg-primary\", \"text-light\"];\n      props.forEach(function (prop) {\n        obj.firstChild.classList.toggle(prop);\n      });\n    };\n\n    selected && apparence();\n\n    while (true) {\n      if (el.id) {\n        break;\n      }\n\n      el = el.parentNode;\n    }\n\n    selected = el.id;\n    apparence();\n  };\n\n  var changeRadio = function changeRadio(e) {\n    if (radioSelected) {\n      radioValues.forEach(function (value) {\n        document.querySelector(\"[value='\".concat(value, \"']\")).parentNode.classList.toggle(\"active\");\n      });\n    } else {\n      e.target.parentNode.classList.toggle(\"active\");\n    }\n\n    radioSelected = e.target.value;\n  };\n\n  return /*#__PURE__*/_jsx(Layout, {\n    footer: false,\n    children: /*#__PURE__*/_jsx(\"div\", {\n      className: \"container p-2\",\n      children: /*#__PURE__*/_jsxs(\"form\", {\n        onSubmit: regisAppointment,\n        children: [/*#__PURE__*/_jsx(\"h4\", {\n          className: \"p-3\",\n          children: /*#__PURE__*/_jsx(\"strong\", {\n            children: \"Select a Tour Style\"\n          })\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: \"btn-group-toggle row\",\n          children: radioValues.map(function (el, i) {\n            return /*#__PURE__*/_jsxs(\"label\", {\n              className: \"form-label btn btn-outline-primary col\",\n              children: [/*#__PURE__*/_jsx(\"input\", {\n                className: \"form-check-input\",\n                onChange: changeRadio,\n                type: \"radio\",\n                name: \"options\",\n                id: \"option\".concat(i),\n                value: el,\n                required: true\n              }), el]\n            }, i);\n          })\n        }), /*#__PURE__*/_jsx(\"h4\", {\n          className: \"py-2\",\n          children: /*#__PURE__*/_jsx(\"strong\", {\n            children: \"Select a Date\"\n          })\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: \"row row-cols-md-4 row-cols-lg-5\",\n          children: groupDays(date, 10).map(function (_ref2, i) {\n            var day = _ref2.day,\n                mounth = _ref2.mounth,\n                weekDay = _ref2.weekDay,\n                year = _ref2.year,\n                id = _ref2.id;\n            return /*#__PURE__*/_jsx(\"div\", {\n              id: id,\n              className: \"btn-group-toggle text-center col my-2\",\n              children: /*#__PURE__*/_jsxs(\"label\", {\n                onClick: calendarClick,\n                className: \"form-label btn card bg-light user-select-none\",\n                children: [/*#__PURE__*/_jsx(\"input\", {\n                  className: \"form-check=input\",\n                  type: \"radio\",\n                  name: \"days\",\n                  required: true\n                }), /*#__PURE__*/_jsxs(\"div\", {\n                  children: [/*#__PURE__*/_jsxs(\"div\", {\n                    className: \"card-header h5\",\n                    children: [mounth, \" \", day]\n                  }), /*#__PURE__*/_jsx(\"div\", {\n                    className: \"card-body h3\",\n                    children: weekDay\n                  }), /*#__PURE__*/_jsx(\"div\", {\n                    className: \"card-footer h5\",\n                    children: year\n                  })]\n                })]\n              })\n            }, i);\n          })\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: \"form-group row\",\n          children: /*#__PURE__*/_jsx(\"label\", {\n            className: \"col-12 col-lg-4\",\n            children: /*#__PURE__*/_jsx(\"select\", {\n              onChange: function onChange(e) {\n                return hour = e.target.value;\n              },\n              className: \"form-control text-center\",\n              name: \"Hour\",\n              id: \"hour\",\n              children: [9, 10, 11, 1, 2, 3, 4, 5].map(function (hour, i) {\n                return /*#__PURE__*/_jsx(\"option\", {\n                  value: hour,\n                  children: \"\".concat(hour, \":00 \").concat(hour > 5 ? \"am\" : \"pm\")\n                }, i);\n              })\n            })\n          })\n        }), /*#__PURE__*/_jsx(\"button\", {\n          type: \"submit\",\n          className: \"btn btn-primary my-2 col-md-12\",\n          children: \"Request this time\"\n        })]\n      })\n    })\n  });\n};\n\nexport default Form;","map":null,"metadata":{},"sourceType":"module"}